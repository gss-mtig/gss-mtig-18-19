



<!DOCTYPE html>
<html lang="es" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="Geoservicios para Smart Cities.">
      
      
        <link rel="canonical" href="https://gss-mtig.github.io/gss-mtig-18-19/11_ejemplo_sensores_port_bcn/">
      
      
        <meta name="author" content="gss-mtig">
      
      
        <meta name="lang:clipboard.copy" content="Copiar al portapapeles">
      
        <meta name="lang:clipboard.copied" content="Copiado al portapapeles">
      
        <meta name="lang:search.language" content="es">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No se encontraron documentos">
      
        <meta name="lang:search.result.one" content="1 documento encontrado">
      
        <meta name="lang:search.result.other" content="# documentos encontrados">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-3.1.0">
    
    
      
        <title>11. Ejemplo sensores port Barcelona - Geoservicios para Smart Cities</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/application.11e41852.css">
      
      
    
    
      <script src="../assets/javascripts/modernizr.20ef595d.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../assets/fonts/material-icons.css">
    
    
    
  </head>
  
    <body dir="ltr">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448"
    viewBox="0 0 416 448" id="__github">
  <path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19-18.125
        8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19 18.125-8.5
        18.125 8.5 10.75 19 3.125 20.5zM320 304q0 10-3.125 20.5t-10.75
        19-18.125 8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19
        18.125-8.5 18.125 8.5 10.75 19 3.125 20.5zM360
        304q0-30-17.25-51t-46.75-21q-10.25 0-48.75 5.25-17.75 2.75-39.25
        2.75t-39.25-2.75q-38-5.25-48.75-5.25-29.5 0-46.75 21t-17.25 51q0 22 8
        38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0
        37.25-1.75t35-7.375 30.5-15 20.25-25.75 8-38.375zM416 260q0 51.75-15.25
        82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5-41.75
        1.125q-19.5 0-35.5-0.75t-36.875-3.125-38.125-7.5-34.25-12.875-30.25-20.25-21.5-28.75q-15.5-30.75-15.5-82.75
        0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25
        30.875q36.75-8.75 77.25-8.75 37 0 70 8 26.25-20.5
        46.75-30.25t47.25-9.75q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34
        99.5z" />
</svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#ejemplo-sensores-port-barcelona" tabindex="1" class="md-skip">
        Saltar a contenido
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="https://gss-mtig.github.io/gss-mtig-18-19/" title="Geoservicios para Smart Cities" class="md-header-nav__button md-logo">
          
            <i class="md-icon"></i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            
              <span class="md-header-nav__topic">
                Geoservicios para Smart Cities
              </span>
              <span class="md-header-nav__topic">
                11. Ejemplo sensores port Barcelona
              </span>
            
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          
            <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
            
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Búsqueda" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Teclee para comenzar búsqueda
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
          
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  


  <a href="https://github.com/gss-mtig/gss-mtig-18-19/" title="Ir al repositorio" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#__github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      GitHub
    </div>
  </a>

          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="https://gss-mtig.github.io/gss-mtig-18-19/" title="Geoservicios para Smart Cities" class="md-nav__button md-logo">
      
        <i class="md-icon"></i>
      
    </a>
    Geoservicios para Smart Cities
  </label>
  
    <div class="md-nav__source">
      


  


  <a href="https://github.com/gss-mtig/gss-mtig-18-19/" title="Ir al repositorio" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#__github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      GitHub
    </div>
  </a>

    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href=".." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../1_introduccion_a_las_smart_cities/" title="1. Introducción a las Smart Cities" class="md-nav__link">
      1. Introducción a las Smart Cities
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../2_conceptos_y_servicios_open_data/" title="2. API servicios Open data (CKAN y SOCRATA)" class="md-nav__link">
      2. API servicios Open data (CKAN y SOCRATA)
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../3_conceptos_vector_tiles/" title="3. Conceptos Vector Tiles" class="md-nav__link">
      3. Conceptos Vector Tiles
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../4_visualizacion_kepler/" title="4. Visualización con Kepler.gl" class="md-nav__link">
      4. Visualización con Kepler.gl
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../5_herramientas_visualizacion_datos/" title="5. Herramientas de visualización de datos" class="md-nav__link">
      5. Herramientas de visualización de datos
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../6_conceptos_geoservicios/" title="6. Conceptos básicos de Geoservicios" class="md-nav__link">
      6. Conceptos básicos de Geoservicios
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../7_consideraciones_servicios_opendata/" title="7. Consideraciones sobre servicios Open data" class="md-nav__link">
      7. Consideraciones sobre servicios Open data
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../8_ejemplo_servicio_bicing_bcn/" title="8. Ejemplo servicio bicing Barcelona" class="md-nav__link">
      8. Ejemplo servicio bicing Barcelona
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../9_ejemplo_servicio_bicing_bcn_vt/" title="9. Ejemplo servicio bicing Barcelona (VectorTiles)" class="md-nav__link">
      9. Ejemplo servicio bicing Barcelona (VectorTiles)
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../10_consideraciones_servicios_realtime_sensores/" title="10. Consideraciones sobre servicios de Sensores" class="md-nav__link">
      10. Consideraciones sobre servicios de Sensores
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        11. Ejemplo sensores port Barcelona
      </label>
    
    <a href="./" title="11. Ejemplo sensores port Barcelona" class="md-nav__link md-nav__link--active">
      11. Ejemplo sensores port Barcelona
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Tabla de contenidos</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#acceso-al-servicio-de-datos-de-sensores-del-port-de-barcelona" title="Acceso al servicio de datos de sensores del Port de Barcelona" class="md-nav__link">
    Acceso al servicio de datos de sensores del Port de Barcelona
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#creacion-de-un-visor" title="Creación de un visor" class="md-nav__link">
    Creación de un visor
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#referencias" title="Referencias" class="md-nav__link">
    Referencias
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../12_ejemplo_sentilo_aca/" title="12. Ejemplo Sentilo ACA" class="md-nav__link">
      12. Ejemplo Sentilo ACA
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../13_geoservicios_realtime/" title="13. Geoservicios realtime" class="md-nav__link">
      13. Geoservicios realtime
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../14_herramientas_visualizacion_geoservicios/" title="14. Herramientas de visualización geoservicios" class="md-nav__link">
      14. Herramientas de visualización geoservicios
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../15_ejemplo_mobility/" title="15. Ejemplo Mobility" class="md-nav__link">
      15. Ejemplo Mobility
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../16_ejemplo_geoservicio_realtime/" title="16. Ejemplo servicio realtime para compartir la ubicación" class="md-nav__link">
      16. Ejemplo servicio realtime para compartir la ubicación
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../17_ejemplo_gtfs/" title="17. Ejemplo GTFS" class="md-nav__link">
      17. Ejemplo GTFS
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Tabla de contenidos</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#acceso-al-servicio-de-datos-de-sensores-del-port-de-barcelona" title="Acceso al servicio de datos de sensores del Port de Barcelona" class="md-nav__link">
    Acceso al servicio de datos de sensores del Port de Barcelona
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#creacion-de-un-visor" title="Creación de un visor" class="md-nav__link">
    Creación de un visor
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#referencias" title="Referencias" class="md-nav__link">
    Referencias
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/gss-mtig/gss-mtig-18-19/edit/master/docs/11_ejemplo_sensores_port_bcn.md" title="Editar esta página" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                <h1 id="ejemplo-sensores-port-barcelona">Ejemplo sensores port Barcelona</h1>
<h2 id="acceso-al-servicio-de-datos-de-sensores-del-port-de-barcelona">Acceso al servicio de datos de sensores del Port de Barcelona</h2>
<p>En el portal de sensores del Port de Barcelona <sup id="fnref:1"><a class="footnote-ref" href="#fn:1" rel="footnote">1</a></sup> podemos encontrar una serie de componentes gráficos o widgets que permiten acceder a los datos de los diferentes sensores SOS <sup id="fnref:2"><a class="footnote-ref" href="#fn:2" rel="footnote">2</a></sup>. También podemos acceder directamente al servicio <a href="http://sensors.portdebarcelona.cat/sos/json">http://sensors.portdebarcelona.cat/sos/json</a> si queremos implementar nuestros propios componentes o procesar los datos directamente.</p>
<p>En la documentación del servicio vemos que estos widgets implementan un cliente SOS que soporta la versión 2.0 de estándard. Los widgets necesitan un endpoint en formato JSON. Lo cual resulta no ser un requisito del estándar si no una funcionalidad opcional que proporciona la implementación del servidor SOS de 52 north en su versión 4.0.0 o superior.</p>
<p>La ventaja de utilizar los widgets es que proporcionan una capa de abstracción que hace el "trabajo sucio" y evita trabajar directamente con el servicio.</p>
<p>La implementación de los widgets es open source <sup id="fnref:3"><a class="footnote-ref" href="#fn:3" rel="footnote">3</a></sup> y extensible, lo que permite poder desarrollar nuestros propios widgets.</p>
<h2 id="creacion-de-un-visor">Creación de un visor</h2>
<p>Para crear un visor de mapas utilizaremos el widget de Mapa <sup id="fnref:4"><a class="footnote-ref" href="#fn:4" rel="footnote">4</a></sup> que está basado en la librería de mapas Leaflet. <sup id="fnref:5"><a class="footnote-ref" href="#fn:5" rel="footnote">5</a></sup></p>
<ul>
<li>Crear una carpeta con el nombre de <em>visor-port</em>.</li>
<li>Crear un archivo con el nombre de <em>index.html</em> dentro de la carpeta.</li>
<li>Abrir el archivo index.html con un editor de texto y copiar el siguiente código.</li>
</ul>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>Sensores Port de Barcelona<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">style</span><span class="p">&gt;</span>
    <span class="p">#</span><span class="nn">map-container</span> <span class="p">{</span>
        <span class="k">position</span><span class="p">:</span> <span class="kc">absolute</span><span class="p">;</span>
        <span class="k">top</span><span class="p">:</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">left</span><span class="p">:</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">bottom</span><span class="p">:</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">right</span><span class="p">:</span> <span class="mi">0</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="p">&lt;/</span><span class="nt">style</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;map-container&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

  <span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;http://sensors.fonts.cat/js/SensorWidgets.js&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">script</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text/javascript&quot;</span><span class="p">&gt;</span>

    <span class="nx">SensorWidget</span><span class="p">(</span><span class="s1">&#39;map&#39;</span><span class="p">,</span> <span class="p">{</span>
      <span class="s2">&quot;service&quot;</span><span class="o">:</span> <span class="s2">&quot;http://sensors.portdebarcelona.cat/sos/json&quot;</span><span class="p">,</span>
      <span class="s2">&quot;offering&quot;</span><span class="o">:</span> <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/offerings#30m&quot;</span><span class="p">,</span>
      <span class="s2">&quot;swap_axis&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
      <span class="s2">&quot;features&quot;</span><span class="o">:</span> <span class="p">[],</span>
      <span class="s2">&quot;properties&quot;</span><span class="o">:</span> <span class="p">[]</span>
  <span class="p">},</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;map-container&#39;</span><span class="p">));</span>

  <span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</pre></div>
</td></tr></table>

<ul>
<li>
<p>Abrir el archivo index.html en el navegador para confirmar que carga un mapa del mundo. Este mapa no contiene ninguna información.</p>
</li>
<li>
<p>Agregar algunas features (sensores) en la matriz de features. Para obtenter las features tendríamos que hacer una petición de GetFeatureOfInterest <sup id="fnref:6"><a class="footnote-ref" href="#fn:6" rel="footnote">6</a></sup>. Para agregar algunos elementos en el mapa reemplazar la propiedad features por lo siguiente:</p>
</li>
</ul>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>Sensores Port de Barcelona<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">style</span><span class="p">&gt;</span>
    <span class="p">#</span><span class="nn">map-container</span> <span class="p">{</span>
        <span class="k">position</span><span class="p">:</span> <span class="kc">absolute</span><span class="p">;</span>
        <span class="k">top</span><span class="p">:</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">left</span><span class="p">:</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">bottom</span><span class="p">:</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">right</span><span class="p">:</span> <span class="mi">0</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="p">&lt;/</span><span class="nt">style</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;map-container&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

  <span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;http://sensors.fonts.cat/js/SensorWidgets.js&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">script</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text/javascript&quot;</span><span class="p">&gt;</span>

    <span class="nx">SensorWidget</span><span class="p">(</span><span class="s1">&#39;map&#39;</span><span class="p">,</span> <span class="p">{</span>
      <span class="s2">&quot;service&quot;</span><span class="o">:</span> <span class="s2">&quot;http://sensors.portdebarcelona.cat/sos/json&quot;</span><span class="p">,</span>
      <span class="s2">&quot;offering&quot;</span><span class="o">:</span> <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/offerings#30m&quot;</span><span class="p">,</span>
      <span class="s2">&quot;swap_axis&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
<span class="hll">      <span class="s2">&quot;features&quot;</span><span class="o">:</span> <span class="p">[</span>
</span><span class="hll">        <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/features#01&quot;</span><span class="p">,</span>
</span><span class="hll">        <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/features#02&quot;</span><span class="p">,</span>
</span><span class="hll">        <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/features#03&quot;</span><span class="p">,</span>
</span><span class="hll">        <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/features#P4&quot;</span><span class="p">,</span>
</span><span class="hll">        <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/features#10&quot;</span><span class="p">,</span>
</span><span class="hll">        <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/features#P5&quot;</span><span class="p">,</span>
</span><span class="hll">        <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/features#P6&quot;</span>
</span><span class="hll">      <span class="p">],</span>
</span>      <span class="s2">&quot;properties&quot;</span><span class="o">:</span> <span class="p">[]</span>
  <span class="p">},</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;map-container&#39;</span><span class="p">));</span>

  <span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</pre></div>
</td></tr></table>

<ul>
<li>
<p>Recargar el mapa y confirmar que aparecen unos puntos en el puerto de Barcelona.</p>
</li>
<li>
<p>Agregar propiedades a los sensores. Ya tenemos algunos sensores en nuestro mapa pero no tenemos datos asociados a los mismos. Para ello indicar que propiedades queremos observar. Esto lo indicaremos en la matriz de properties de nuestro mapa. Agregar las siguientes propiedades para ver la temperatura</p>
</li>
</ul>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>Sensores Port de Barcelona<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">style</span><span class="p">&gt;</span>
    <span class="p">#</span><span class="nn">map-container</span> <span class="p">{</span>
        <span class="k">position</span><span class="p">:</span> <span class="kc">absolute</span><span class="p">;</span>
        <span class="k">top</span><span class="p">:</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">left</span><span class="p">:</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">bottom</span><span class="p">:</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">right</span><span class="p">:</span> <span class="mi">0</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="p">&lt;/</span><span class="nt">style</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;map-container&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

  <span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;http://sensors.fonts.cat/js/SensorWidgets.js&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">script</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text/javascript&quot;</span><span class="p">&gt;</span>

    <span class="nx">SensorWidget</span><span class="p">(</span><span class="s1">&#39;map&#39;</span><span class="p">,</span> <span class="p">{</span>
      <span class="s2">&quot;service&quot;</span><span class="o">:</span> <span class="s2">&quot;http://sensors.portdebarcelona.cat/sos/json&quot;</span><span class="p">,</span>
      <span class="s2">&quot;offering&quot;</span><span class="o">:</span> <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/offerings#30m&quot;</span><span class="p">,</span>
      <span class="s2">&quot;swap_axis&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
      <span class="s2">&quot;features&quot;</span><span class="o">:</span> <span class="p">[</span>
        <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/features#01&quot;</span><span class="p">,</span>
        <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/features#02&quot;</span><span class="p">,</span>
        <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/features#03&quot;</span><span class="p">,</span>
        <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/features#P4&quot;</span><span class="p">,</span>
        <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/features#10&quot;</span><span class="p">,</span>
        <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/features#P5&quot;</span><span class="p">,</span>
        <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/features#P6&quot;</span>
      <span class="p">],</span>
<span class="hll">      <span class="s2">&quot;properties&quot;</span><span class="o">:</span> <span class="p">[</span>
</span><span class="hll">        <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/properties#32M&quot;</span><span class="p">,</span>
</span><span class="hll">        <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/properties#32&quot;</span><span class="p">,</span>
</span><span class="hll">        <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/properties#32N&quot;</span>
</span><span class="hll">      <span class="p">],</span>
</span>  <span class="p">},</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;map-container&#39;</span><span class="p">));</span>

  <span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</pre></div>
</td></tr></table>

<ul>
<li>
<p>Recargar el mapa y pasar el cursor sobre algún elemento para ver que se despliega un panel con las temperaturas.</p>
</li>
<li>
<p>Combinar varios widgets en la aplicación. Mostar un popup con un widget al hacer click sobre un elemento. Utilizar la opción <em>popup_widget</em> del mapa. Cargar un widget de tipo serie de tiempo con las temperaturas. Escribir justo debajo de las propertities lo siguiente:</p>
</li>
</ul>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>Sensores Port de Barcelona<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">style</span><span class="p">&gt;</span>
    <span class="p">#</span><span class="nn">map-container</span> <span class="p">{</span>
        <span class="k">position</span><span class="p">:</span> <span class="kc">absolute</span><span class="p">;</span>
        <span class="k">top</span><span class="p">:</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">left</span><span class="p">:</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">bottom</span><span class="p">:</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">right</span><span class="p">:</span> <span class="mi">0</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="p">&lt;/</span><span class="nt">style</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;map-container&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

  <span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;http://sensors.fonts.cat/js/SensorWidgets.js&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">script</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text/javascript&quot;</span><span class="p">&gt;</span>

    <span class="nx">SensorWidget</span><span class="p">(</span><span class="s1">&#39;map&#39;</span><span class="p">,</span> <span class="p">{</span>
      <span class="s2">&quot;service&quot;</span><span class="o">:</span> <span class="s2">&quot;http://sensors.portdebarcelona.cat/sos/json&quot;</span><span class="p">,</span>
      <span class="s2">&quot;offering&quot;</span><span class="o">:</span> <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/offerings#30m&quot;</span><span class="p">,</span>
      <span class="s2">&quot;swap_axis&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
      <span class="s2">&quot;features&quot;</span><span class="o">:</span> <span class="p">[</span>
        <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/features#01&quot;</span><span class="p">,</span>
        <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/features#02&quot;</span><span class="p">,</span>
        <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/features#03&quot;</span><span class="p">,</span>
        <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/features#P4&quot;</span><span class="p">,</span>
        <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/features#10&quot;</span><span class="p">,</span>
        <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/features#P5&quot;</span><span class="p">,</span>
        <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/features#P6&quot;</span>
      <span class="p">],</span>
      <span class="s2">&quot;properties&quot;</span><span class="o">:</span> <span class="p">[</span>
        <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/properties#32M&quot;</span><span class="p">,</span>
        <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/properties#32&quot;</span><span class="p">,</span>
        <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/properties#32N&quot;</span>
      <span class="p">],</span>
<span class="hll">      <span class="s2">&quot;popup_widget&quot;</span><span class="o">:</span> <span class="p">{</span>
</span><span class="hll">        <span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;timechart&quot;</span><span class="p">,</span>
</span><span class="hll">        <span class="s2">&quot;title&quot;</span><span class="o">:</span> <span class="s2">&quot;Temperatures&quot;</span><span class="p">,</span>
</span><span class="hll">        <span class="s2">&quot;properties&quot;</span><span class="o">:</span> <span class="p">[</span>
</span><span class="hll">          <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/properties#32M&quot;</span><span class="p">,</span>
</span><span class="hll">          <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/properties#32&quot;</span><span class="p">,</span>
</span><span class="hll">          <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/properties#32N&quot;</span>
</span><span class="hll">        <span class="p">],</span>
</span><span class="hll">        <span class="s2">&quot;time_start&quot;</span><span class="o">:</span> <span class="s2">&quot;2015-09-03T05:05:40Z&quot;</span><span class="p">,</span>
</span><span class="hll">        <span class="s2">&quot;time_end&quot;</span><span class="o">:</span> <span class="s2">&quot;2015-09-03T08:05:40Z&quot;</span>
</span><span class="hll">      <span class="p">}</span>
</span>  <span class="p">},</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;map-container&#39;</span><span class="p">));</span>

  <span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</pre></div>
</td></tr></table>

<ul>
<li>
<p>Recargar la página y clicar sobre un elemento para ver un popup con la serie temporal de las temperaturas.</p>
</li>
<li>
<p>Mostrar un widget en un div fuera del mapa al hacer click sobre un elemento. Escribir justo debajo de donde declaramos el div del mapa lo siguiente</p>
</li>
</ul>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>Sensores Port de Barcelona<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">style</span><span class="p">&gt;</span>
    <span class="p">#</span><span class="nn">map-container</span> <span class="p">{</span>
        <span class="k">position</span><span class="p">:</span> <span class="kc">absolute</span><span class="p">;</span>
        <span class="k">top</span><span class="p">:</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">left</span><span class="p">:</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">bottom</span><span class="p">:</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">right</span><span class="p">:</span> <span class="mi">0</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="p">&lt;/</span><span class="nt">style</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;map-container&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="hll">  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;info-container&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span>
  <span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;http://sensors.fonts.cat/js/SensorWidgets.js&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">script</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text/javascript&quot;</span><span class="p">&gt;</span>

    <span class="nx">SensorWidget</span><span class="p">(</span><span class="s1">&#39;map&#39;</span><span class="p">,</span> <span class="p">{</span>
      <span class="s2">&quot;service&quot;</span><span class="o">:</span> <span class="s2">&quot;http://sensors.portdebarcelona.cat/sos/json&quot;</span><span class="p">,</span>
      <span class="s2">&quot;offering&quot;</span><span class="o">:</span> <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/offerings#30m&quot;</span><span class="p">,</span>
      <span class="s2">&quot;swap_axis&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
      <span class="s2">&quot;features&quot;</span><span class="o">:</span> <span class="p">[</span>
        <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/features#01&quot;</span><span class="p">,</span>
        <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/features#02&quot;</span><span class="p">,</span>
        <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/features#03&quot;</span><span class="p">,</span>
        <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/features#P4&quot;</span><span class="p">,</span>
        <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/features#10&quot;</span><span class="p">,</span>
        <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/features#P5&quot;</span><span class="p">,</span>
        <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/features#P6&quot;</span>
      <span class="p">],</span>
      <span class="s2">&quot;properties&quot;</span><span class="o">:</span> <span class="p">[</span>
        <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/properties#32M&quot;</span><span class="p">,</span>
        <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/properties#32&quot;</span><span class="p">,</span>
        <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/properties#32N&quot;</span>
      <span class="p">],</span>
      <span class="s2">&quot;popup_widget&quot;</span><span class="o">:</span> <span class="p">{</span>
        <span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;timechart&quot;</span><span class="p">,</span>
        <span class="s2">&quot;title&quot;</span><span class="o">:</span> <span class="s2">&quot;Temperatures&quot;</span><span class="p">,</span>
        <span class="s2">&quot;properties&quot;</span><span class="o">:</span> <span class="p">[</span>
          <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/properties#32M&quot;</span><span class="p">,</span>
          <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/properties#32&quot;</span><span class="p">,</span>
          <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/properties#32N&quot;</span>
        <span class="p">],</span>
        <span class="s2">&quot;time_start&quot;</span><span class="o">:</span> <span class="s2">&quot;2015-09-03T05:05:40Z&quot;</span><span class="p">,</span>
        <span class="s2">&quot;time_end&quot;</span><span class="o">:</span> <span class="s2">&quot;2015-09-03T08:05:40Z&quot;</span>
      <span class="p">}</span>
  <span class="p">},</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;map-container&#39;</span><span class="p">));</span>

  <span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</pre></div>
</td></tr></table>

<ul>
<li>Crear un nuevo estilo para este div. Escibir en nuestro apartado de estilo css</li>
</ul>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>Sensores Port de Barcelona<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">style</span><span class="p">&gt;</span>
    <span class="p">#</span><span class="nn">map-container</span> <span class="p">{</span>
        <span class="k">position</span><span class="p">:</span> <span class="kc">absolute</span><span class="p">;</span>
        <span class="k">top</span><span class="p">:</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">left</span><span class="p">:</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">bottom</span><span class="p">:</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">right</span><span class="p">:</span> <span class="mi">0</span><span class="p">;</span>
    <span class="p">}</span>

<span class="hll">    <span class="p">#</span><span class="nn">info-container</span> <span class="p">{</span>
</span><span class="hll">      <span class="k">position</span><span class="p">:</span> <span class="kc">absolute</span><span class="p">;</span>
</span><span class="hll">      <span class="k">top</span><span class="p">:</span> <span class="mi">0</span><span class="p">;</span>
</span><span class="hll">      <span class="k">left</span><span class="p">:</span> <span class="mi">0</span><span class="p">;</span>
</span><span class="hll">      <span class="k">width</span><span class="p">:</span> <span class="s2">&quot;200px&quot;</span><span class="p">;</span>
</span><span class="hll">      <span class="k">z-index</span><span class="p">:</span> <span class="mi">9000</span><span class="p">;</span>
</span><span class="hll">      <span class="k">background-color</span><span class="p">:</span> <span class="nb">rgba</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span><span class="mi">255</span><span class="p">,</span><span class="mi">255</span><span class="p">,</span><span class="mf">0.7</span><span class="p">);</span>
</span><span class="hll">    <span class="p">}</span>
</span>    <span class="p">&lt;/</span><span class="nt">style</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;map-container&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;info-container&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

  <span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;http://sensors.fonts.cat/js/SensorWidgets.js&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">script</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text/javascript&quot;</span><span class="p">&gt;</span>

    <span class="nx">SensorWidget</span><span class="p">(</span><span class="s1">&#39;map&#39;</span><span class="p">,</span> <span class="p">{</span>
      <span class="s2">&quot;service&quot;</span><span class="o">:</span> <span class="s2">&quot;http://sensors.portdebarcelona.cat/sos/json&quot;</span><span class="p">,</span>
      <span class="s2">&quot;offering&quot;</span><span class="o">:</span> <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/offerings#30m&quot;</span><span class="p">,</span>
      <span class="s2">&quot;swap_axis&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
      <span class="s2">&quot;features&quot;</span><span class="o">:</span> <span class="p">[</span>
        <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/features#01&quot;</span><span class="p">,</span>
        <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/features#02&quot;</span><span class="p">,</span>
        <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/features#03&quot;</span><span class="p">,</span>
        <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/features#P4&quot;</span><span class="p">,</span>
        <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/features#10&quot;</span><span class="p">,</span>
        <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/features#P5&quot;</span><span class="p">,</span>
        <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/features#P6&quot;</span>
      <span class="p">],</span>
      <span class="s2">&quot;properties&quot;</span><span class="o">:</span> <span class="p">[</span>
        <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/properties#32M&quot;</span><span class="p">,</span>
        <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/properties#32&quot;</span><span class="p">,</span>
        <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/properties#32N&quot;</span>
      <span class="p">],</span>
      <span class="s2">&quot;popup_widget&quot;</span><span class="o">:</span> <span class="p">{</span>
        <span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;timechart&quot;</span><span class="p">,</span>
        <span class="s2">&quot;title&quot;</span><span class="o">:</span> <span class="s2">&quot;Temperatures&quot;</span><span class="p">,</span>
        <span class="s2">&quot;properties&quot;</span><span class="o">:</span> <span class="p">[</span>
          <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/properties#32M&quot;</span><span class="p">,</span>
          <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/properties#32&quot;</span><span class="p">,</span>
          <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/properties#32N&quot;</span>
        <span class="p">],</span>
        <span class="s2">&quot;time_start&quot;</span><span class="o">:</span> <span class="s2">&quot;2015-09-03T05:05:40Z&quot;</span><span class="p">,</span>
        <span class="s2">&quot;time_end&quot;</span><span class="o">:</span> <span class="s2">&quot;2015-09-03T08:05:40Z&quot;</span>
      <span class="p">}</span>
  <span class="p">},</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;map-container&#39;</span><span class="p">));</span>

  <span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</pre></div>
</td></tr></table>

<ul>
<li>Quitar la opción de <em>popup_widget</em> del mapa.</li>
</ul>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
  &lt;title&gt;Sensores Port de Barcelona&lt;/title&gt;
  &lt;style&gt;
    #map-container {
        position: absolute;
        top: 0;
        left: 0;
        bottom: 0;
        right: 0;
    }

    #info-container {
      position: absolute;
      top: 0;
      left: 0;
      width: &quot;200px&quot;;
      z-index: 9000;
      background-color: rgba(255,255,255,0.7);
    }
    &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
  &lt;div id=&quot;map-container&quot;&gt;&lt;/div&gt;
  &lt;div id=&quot;info-container&quot;&gt;&lt;/div&gt;

  &lt;script src=&quot;http://sensors.fonts.cat/js/SensorWidgets.js&quot;&gt;&lt;/script&gt;
  &lt;script type=&quot;text/javascript&quot;&gt;

    SensorWidget(&#39;map&#39;, {
      &quot;service&quot;: &quot;http://sensors.portdebarcelona.cat/sos/json&quot;,
      &quot;offering&quot;: &quot;http://sensors.portdebarcelona.cat/def/weather/offerings#30m&quot;,
      &quot;swap_axis&quot;: true,
      &quot;features&quot;: [
        &quot;http://sensors.portdebarcelona.cat/def/weather/features#01&quot;,
        &quot;http://sensors.portdebarcelona.cat/def/weather/features#02&quot;,
        &quot;http://sensors.portdebarcelona.cat/def/weather/features#03&quot;,
        &quot;http://sensors.portdebarcelona.cat/def/weather/features#P4&quot;,
        &quot;http://sensors.portdebarcelona.cat/def/weather/features#10&quot;,
        &quot;http://sensors.portdebarcelona.cat/def/weather/features#P5&quot;,
        &quot;http://sensors.portdebarcelona.cat/def/weather/features#P6&quot;
      ],
      &quot;properties&quot;: [
        &quot;http://sensors.portdebarcelona.cat/def/weather/properties#32M&quot;,
        &quot;http://sensors.portdebarcelona.cat/def/weather/properties#32&quot;,
        &quot;http://sensors.portdebarcelona.cat/def/weather/properties#32N&quot;
      ],
<span class="gd">-      &quot;popup_widget&quot;: {</span>
<span class="gd">-        &quot;name&quot;: &quot;timechart&quot;,</span>
<span class="gd">-        &quot;title&quot;: &quot;Temperatures&quot;,</span>
<span class="gd">-        &quot;properties&quot;: [</span>
<span class="gd">-          &quot;http://sensors.portdebarcelona.cat/def/weather/properties#32M&quot;,</span>
<span class="gd">-          &quot;http://sensors.portdebarcelona.cat/def/weather/properties#32&quot;,</span>
<span class="gd">-          &quot;http://sensors.portdebarcelona.cat/def/weather/properties#32N&quot;</span>
<span class="gd">-        ],</span>
<span class="gd">-        &quot;time_start&quot;: &quot;2015-09-03T05:05:40Z&quot;,</span>
<span class="gd">-        &quot;time_end&quot;: &quot;2015-09-03T08:05:40Z&quot;</span>
<span class="gd">-      }</span>
  }, document.getElementById(&#39;map-container&#39;));

  &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;
</pre></div>
</td></tr></table>

<ul>
<li>Utilizar la opción de <em>on_click</em> del mapa. Esta opción permite definir una función que se ejecuta al hacer click sobre un elemento del mapa. Copiar debajo de las properties lo siguiente:</li>
</ul>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>Sensores Port de Barcelona<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">style</span><span class="p">&gt;</span>
    <span class="p">#</span><span class="nn">map-container</span> <span class="p">{</span>
        <span class="k">position</span><span class="p">:</span> <span class="kc">absolute</span><span class="p">;</span>
        <span class="k">top</span><span class="p">:</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">left</span><span class="p">:</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">bottom</span><span class="p">:</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">right</span><span class="p">:</span> <span class="mi">0</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="p">#</span><span class="nn">info-container</span> <span class="p">{</span>
      <span class="k">position</span><span class="p">:</span> <span class="kc">absolute</span><span class="p">;</span>
      <span class="k">top</span><span class="p">:</span> <span class="mi">0</span><span class="p">;</span>
      <span class="k">left</span><span class="p">:</span> <span class="mi">0</span><span class="p">;</span>
      <span class="k">width</span><span class="p">:</span> <span class="s2">&quot;200px&quot;</span><span class="p">;</span>
      <span class="k">z-index</span><span class="p">:</span> <span class="mi">9000</span><span class="p">;</span>
      <span class="k">background-color</span><span class="p">:</span> <span class="nb">rgba</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span><span class="mi">255</span><span class="p">,</span><span class="mi">255</span><span class="p">,</span><span class="mf">0.7</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="p">&lt;/</span><span class="nt">style</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;map-container&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;info-container&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

  <span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;http://sensors.fonts.cat/js/SensorWidgets.js&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">script</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text/javascript&quot;</span><span class="p">&gt;</span>

    <span class="nx">SensorWidget</span><span class="p">(</span><span class="s1">&#39;map&#39;</span><span class="p">,</span> <span class="p">{</span>
      <span class="s2">&quot;service&quot;</span><span class="o">:</span> <span class="s2">&quot;http://sensors.portdebarcelona.cat/sos/json&quot;</span><span class="p">,</span>
      <span class="s2">&quot;offering&quot;</span><span class="o">:</span> <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/offerings#30m&quot;</span><span class="p">,</span>
      <span class="s2">&quot;swap_axis&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
      <span class="s2">&quot;features&quot;</span><span class="o">:</span> <span class="p">[</span>
        <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/features#01&quot;</span><span class="p">,</span>
        <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/features#02&quot;</span><span class="p">,</span>
        <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/features#03&quot;</span><span class="p">,</span>
        <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/features#P4&quot;</span><span class="p">,</span>
        <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/features#10&quot;</span><span class="p">,</span>
        <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/features#P5&quot;</span><span class="p">,</span>
        <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/features#P6&quot;</span>
      <span class="p">],</span>
      <span class="s2">&quot;properties&quot;</span><span class="o">:</span> <span class="p">[</span>
        <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/properties#32M&quot;</span><span class="p">,</span>
        <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/properties#32&quot;</span><span class="p">,</span>
        <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/properties#32N&quot;</span>
      <span class="p">],</span>
<span class="hll">      <span class="s2">&quot;on_click&quot;</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">el</span><span class="p">){</span>
</span><span class="hll">         <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">el</span><span class="p">);</span>
</span><span class="hll">      <span class="p">}</span>
</span>    <span class="p">},</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;map-container&#39;</span><span class="p">));</span>

  <span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</pre></div>
</td></tr></table>

<ul>
<li>
<p>Recargar la página y clicar sobre un elemento. Abrir la consola de desarrollador para ver que aparece la información del elemento clicado.</p>
</li>
<li>
<p>Crear una función que recibe como parámetro el id de un elemento y crea un widget de tipo termómetro. Escribir antes de donde se cierra el tag de script</p>
</li>
</ul>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>Sensores Port de Barcelona<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">style</span><span class="p">&gt;</span>
    <span class="p">#</span><span class="nn">map-container</span> <span class="p">{</span>
        <span class="k">position</span><span class="p">:</span> <span class="kc">absolute</span><span class="p">;</span>
        <span class="k">top</span><span class="p">:</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">left</span><span class="p">:</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">bottom</span><span class="p">:</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">right</span><span class="p">:</span> <span class="mi">0</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="p">#</span><span class="nn">info-container</span> <span class="p">{</span>
      <span class="k">position</span><span class="p">:</span> <span class="kc">absolute</span><span class="p">;</span>
      <span class="k">top</span><span class="p">:</span> <span class="mi">0</span><span class="p">;</span>
      <span class="k">left</span><span class="p">:</span> <span class="mi">0</span><span class="p">;</span>
      <span class="k">width</span><span class="p">:</span> <span class="s2">&quot;200px&quot;</span><span class="p">;</span>
      <span class="k">z-index</span><span class="p">:</span> <span class="mi">9000</span><span class="p">;</span>
      <span class="k">background-color</span><span class="p">:</span> <span class="nb">rgba</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span><span class="mi">255</span><span class="p">,</span><span class="mi">255</span><span class="p">,</span><span class="mf">0.7</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="p">&lt;/</span><span class="nt">style</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;map-container&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;info-container&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

  <span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;http://sensors.fonts.cat/js/SensorWidgets.js&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">script</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text/javascript&quot;</span><span class="p">&gt;</span>

    <span class="nx">SensorWidget</span><span class="p">(</span><span class="s1">&#39;map&#39;</span><span class="p">,</span> <span class="p">{</span>
      <span class="s2">&quot;service&quot;</span><span class="o">:</span> <span class="s2">&quot;http://sensors.portdebarcelona.cat/sos/json&quot;</span><span class="p">,</span>
      <span class="s2">&quot;offering&quot;</span><span class="o">:</span> <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/offerings#30m&quot;</span><span class="p">,</span>
      <span class="s2">&quot;swap_axis&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
      <span class="s2">&quot;features&quot;</span><span class="o">:</span> <span class="p">[</span>
        <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/features#01&quot;</span><span class="p">,</span>
        <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/features#02&quot;</span><span class="p">,</span>
        <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/features#03&quot;</span><span class="p">,</span>
        <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/features#P4&quot;</span><span class="p">,</span>
        <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/features#10&quot;</span><span class="p">,</span>
        <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/features#P5&quot;</span><span class="p">,</span>
        <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/features#P6&quot;</span>
      <span class="p">],</span>
      <span class="s2">&quot;properties&quot;</span><span class="o">:</span> <span class="p">[</span>
        <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/properties#32M&quot;</span><span class="p">,</span>
        <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/properties#32&quot;</span><span class="p">,</span>
        <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/properties#32N&quot;</span>
      <span class="p">],</span>
      <span class="s2">&quot;on_click&quot;</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">el</span><span class="p">){</span>
         <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">el</span><span class="p">);</span>
      <span class="p">}</span>
    <span class="p">},</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;map-container&#39;</span><span class="p">));</span>

<span class="hll">    <span class="kd">function</span> <span class="nx">showTermometro</span><span class="p">(</span><span class="nx">feature_id</span><span class="p">){</span>
</span><span class="hll">      <span class="nx">SensorWidget</span><span class="p">(</span><span class="s1">&#39;thermometer&#39;</span><span class="p">,</span> <span class="p">{</span>
</span><span class="hll">        <span class="s2">&quot;service&quot;</span><span class="o">:</span> <span class="s2">&quot;http://sensors.portdebarcelona.cat/sos/json&quot;</span><span class="p">,</span>
</span><span class="hll">        <span class="s2">&quot;offering&quot;</span><span class="o">:</span> <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/offerings#30m&quot;</span><span class="p">,</span>
</span><span class="hll">        <span class="s2">&quot;feature&quot;</span><span class="o">:</span> <span class="nx">feature_id</span><span class="p">,</span>
</span><span class="hll">        <span class="s2">&quot;property&quot;</span><span class="o">:</span> <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/properties#32&quot;</span><span class="p">,</span>
</span><span class="hll">        <span class="s2">&quot;refresh_interval&quot;</span><span class="o">:</span> <span class="mi">120</span><span class="p">,</span>
</span><span class="hll">        <span class="s2">&quot;footnote&quot;</span><span class="o">:</span> <span class="s2">&quot;A sample footnote for Thermometer widget&quot;</span>
</span><span class="hll">      <span class="p">},</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;info-container&#39;</span><span class="p">));</span>
</span><span class="hll">    <span class="p">}</span>
</span>  <span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</pre></div>
</td></tr></table>

<ul>
<li>Llamar a la nueva función <strong>showTermometro</strong> dentro de la función del <em>on_click</em>. Escribir luego del console.log</li>
</ul>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>Sensores Port de Barcelona<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">style</span><span class="p">&gt;</span>
    <span class="p">#</span><span class="nn">map-container</span> <span class="p">{</span>
        <span class="k">position</span><span class="p">:</span> <span class="kc">absolute</span><span class="p">;</span>
        <span class="k">top</span><span class="p">:</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">left</span><span class="p">:</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">bottom</span><span class="p">:</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">right</span><span class="p">:</span> <span class="mi">0</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="p">#</span><span class="nn">info-container</span> <span class="p">{</span>
      <span class="k">position</span><span class="p">:</span> <span class="kc">absolute</span><span class="p">;</span>
      <span class="k">top</span><span class="p">:</span> <span class="mi">0</span><span class="p">;</span>
      <span class="k">left</span><span class="p">:</span> <span class="mi">0</span><span class="p">;</span>
      <span class="k">width</span><span class="p">:</span> <span class="s2">&quot;200px&quot;</span><span class="p">;</span>
      <span class="k">z-index</span><span class="p">:</span> <span class="mi">9000</span><span class="p">;</span>
      <span class="k">background-color</span><span class="p">:</span> <span class="nb">rgba</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span><span class="mi">255</span><span class="p">,</span><span class="mi">255</span><span class="p">,</span><span class="mf">0.7</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="p">&lt;/</span><span class="nt">style</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;map-container&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;info-container&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

  <span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;http://sensors.fonts.cat/js/SensorWidgets.js&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">script</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text/javascript&quot;</span><span class="p">&gt;</span>

    <span class="nx">SensorWidget</span><span class="p">(</span><span class="s1">&#39;map&#39;</span><span class="p">,</span> <span class="p">{</span>
      <span class="s2">&quot;service&quot;</span><span class="o">:</span> <span class="s2">&quot;http://sensors.portdebarcelona.cat/sos/json&quot;</span><span class="p">,</span>
      <span class="s2">&quot;offering&quot;</span><span class="o">:</span> <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/offerings#30m&quot;</span><span class="p">,</span>
      <span class="s2">&quot;swap_axis&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
      <span class="s2">&quot;features&quot;</span><span class="o">:</span> <span class="p">[</span>
        <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/features#01&quot;</span><span class="p">,</span>
        <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/features#02&quot;</span><span class="p">,</span>
        <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/features#03&quot;</span><span class="p">,</span>
        <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/features#P4&quot;</span><span class="p">,</span>
        <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/features#10&quot;</span><span class="p">,</span>
        <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/features#P5&quot;</span><span class="p">,</span>
        <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/features#P6&quot;</span>
      <span class="p">],</span>
      <span class="s2">&quot;properties&quot;</span><span class="o">:</span> <span class="p">[</span>
        <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/properties#32M&quot;</span><span class="p">,</span>
        <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/properties#32&quot;</span><span class="p">,</span>
        <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/properties#32N&quot;</span>
      <span class="p">],</span>
      <span class="s2">&quot;on_click&quot;</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">el</span><span class="p">){</span>
         <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">el</span><span class="p">);</span>
<span class="hll">         <span class="nx">showTermometro</span><span class="p">(</span><span class="nx">el</span><span class="p">.</span><span class="nx">feature</span><span class="p">.</span><span class="nx">id</span><span class="p">);</span>
</span>      <span class="p">}</span>
    <span class="p">},</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;map-container&#39;</span><span class="p">));</span>

    <span class="kd">function</span> <span class="nx">showTermometro</span><span class="p">(</span><span class="nx">feature_id</span><span class="p">){</span>
      <span class="nx">SensorWidget</span><span class="p">(</span><span class="s1">&#39;thermometer&#39;</span><span class="p">,</span> <span class="p">{</span>
        <span class="s2">&quot;service&quot;</span><span class="o">:</span> <span class="s2">&quot;http://sensors.portdebarcelona.cat/sos/json&quot;</span><span class="p">,</span>
        <span class="s2">&quot;offering&quot;</span><span class="o">:</span> <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/offerings#30m&quot;</span><span class="p">,</span>
        <span class="s2">&quot;feature&quot;</span><span class="o">:</span> <span class="nx">feature_id</span><span class="p">,</span>
        <span class="s2">&quot;property&quot;</span><span class="o">:</span> <span class="s2">&quot;http://sensors.portdebarcelona.cat/def/weather/properties#32&quot;</span><span class="p">,</span>
        <span class="s2">&quot;refresh_interval&quot;</span><span class="o">:</span> <span class="mi">120</span><span class="p">,</span>
        <span class="s2">&quot;footnote&quot;</span><span class="o">:</span> <span class="s2">&quot;A sample footnote for Thermometer widget&quot;</span>
      <span class="p">},</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;info-container&#39;</span><span class="p">));</span>
    <span class="p">}</span>
  <span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</pre></div>
</td></tr></table>

<ul>
<li>Recargar el mapa y clicar sobre un elemento para ver como se desplega el widget del termómetro con la temperatura actual.</li>
</ul>
<p><img alt="mapa de sensores del port de barcelona" src="../img/sensores_port_bcn.png" />
<em>mapa de sensores del port de barcelona</em></p>
<div class="admonition question">
<p class="admonition-title">Ejercicio</p>
<p>Crear una función para mostrar el widget de <strong>manómetro</strong> en lugar del termómetro. Llamar esta nueva función al hacer click sobre un sensor.</p>
<p>En el siguiente enlace se pueden ver las diferentes opciones <a href="http://sensors.portdebarcelona.cat/?lang=es#gauge">http://sensors.portdebarcelona.cat/?lang=es#gauge</a></p>
</div>
<h2 id="referencias">Referencias</h2>
<div class="footnote">
<hr />
<ol>
<li id="fn:1">
<p><a href="http://sensors.portdebarcelona.cat/?lang=es">http://sensors.portdebarcelona.cat/?lang=es</a>&#160;<a class="footnote-backref" href="#fnref:1" rev="footnote" title="Jump back to footnote 1 in the text">&#8617;</a></p>
</li>
<li id="fn:2">
<p><a href="http://sensor-widgets.readthedocs.io/es/latest/sos.html">http://sensor-widgets.readthedocs.io/es/latest/sos.html</a>&#160;<a class="footnote-backref" href="#fnref:2" rev="footnote" title="Jump back to footnote 2 in the text">&#8617;</a></p>
</li>
<li id="fn:3">
<p><a href="https://github.com/oscarfonts/sensor-widgets">https://github.com/oscarfonts/sensor-widgets</a>&#160;<a class="footnote-backref" href="#fnref:3" rev="footnote" title="Jump back to footnote 3 in the text">&#8617;</a></p>
</li>
<li id="fn:4">
<p><a href="http://sensor-widgets.readthedocs.io/es/latest/widgets.html#mapa-map">http://sensor-widgets.readthedocs.io/es/latest/widgets.html#mapa-map</a>&#160;<a class="footnote-backref" href="#fnref:4" rev="footnote" title="Jump back to footnote 4 in the text">&#8617;</a></p>
</li>
<li id="fn:5">
<p><a href="http://leafletjs.com/">http://leafletjs.com/</a>&#160;<a class="footnote-backref" href="#fnref:5" rev="footnote" title="Jump back to footnote 5 in the text">&#8617;</a></p>
</li>
<li id="fn:6">
<p><a href="http://sensor-widgets.readthedocs.io/es/latest/sos.html#getfeatureofinterest">http://sensor-widgets.readthedocs.io/es/latest/sos.html#getfeatureofinterest</a>&#160;<a class="footnote-backref" href="#fnref:6" rev="footnote" title="Jump back to footnote 6 in the text">&#8617;</a></p>
</li>
</ol>
</div>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../10_consideraciones_servicios_realtime_sensores/" title="10. Consideraciones sobre servicios de Sensores" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Anterior
                </span>
                10. Consideraciones sobre servicios de Sensores
              </span>
            </div>
          </a>
        
        
          <a href="../12_ejemplo_sentilo_aca/" title="12. Ejemplo Sentilo ACA" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Siguiente
                </span>
                12. Ejemplo Sentilo ACA
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
        
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/application.9e1f3b71.js"></script>
      
        
        
          
          <script src="../assets/javascripts/lunr/lunr.stemmer.support.js"></script>
          
            
              
              
                <script src="../assets/javascripts/lunr/lunr.es.js"></script>
              
            
          
          
        
      
      <script>app.initialize({version:"1.0.4",url:{base:".."}})</script>
      
    
    
      
    
  </body>
</html>